<?xml version="1.0" encoding="UTF-8"?>
<project name="org.rubypeople.rdt.doc.user" default="html" basedir=".">
	
	

	<target name="init">
		<property name="docbook.root" value="../../docbook"/>
		<!-- docbook.root might also be set from outside -->
		<echo message="Using docbook.root=${docbook.root}"/>
        <property name="docbook.xsl.dir" value="${docbook.root}/docbook-xsl-1.64.1"/>
        <property name="docbook.dtd.dir" value="${docbook.root}/dtd"/>		
	</target>

	<target name="clean.docbook.generated">
	    <delete file="toc.xml"/>
	    <delete file="docbook.done"/>
	    <delete>
	      <fileset dir="html" includes="*.html"/>
	    </delete>
	    <delete file="customizationLayerCopy.xsl"/>
	</target>
	
	<target name="replaceVarInCustomizationLayer">
	   <copy file="customizationLayer.xsl" tofile="customizationLayerCopy.xsl"/>
	   <replace file="customizationLayerCopy.xsl" token="@@DOCBOOKROOT@@" value="${docbook.root}"/>
	</target>
	
	<target name="html" depends="init,clean.docbook.generated,replaceVarInCustomizationLayer">
	 <!--${docbook.xsl.dir}/eclipse/eclipse.xsl -->
      <style includes="docbook.xml" basedir="." destdir="."  extension=".done" style="customizationLayerCopy.xsl">
        <param name="base.dir" expression="html/"/>
        <param name="manifest.in.base.dir" expression="0"/>
        <param name="eclipse.plugin.id" expression="org.rubypeople.rdt.doc.user"/>
        <param name="eclipse.plugin.name" expression="Ruby Development Documentation"/>
        <param name="eclipse.plugin.provider" expression="RubyPeople, Inc."/>
        <xmlcatalog id="docbook.catalog">
     	 <dtd publicId="-//OASIS//DTD DocBook V3.1//EN" location="${docbook.dtd.dir}/docbookx.dtd"/>
        </xmlcatalog>
       </style>

     </target>

</project>
